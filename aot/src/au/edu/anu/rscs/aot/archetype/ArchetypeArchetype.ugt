tree // Archetype for all archetypes - an archetype is a tree!
//=========================================================//
// CAUTION: DO NOT EDIT THIS FILE !                        //
// it is the root of Aspect-Oriented Thinking              //
// disastrous consequences may follow any change           //
//=========================================================//
// Reminder: labels are lost in the tree importing process. Only names are used as ids.

	// the factory used to read archetype files
	tree_factory = String("au.edu.anu.rscs.aot.archetype.ArchetypeFactory")

//-------------------------------------------------------
// this is an archetype
//-------------------------------------------------------
archetype ArchetypeForArchetypes 

	//-------------------------------------------------------
	// this archetype does not accept any other specification
	//-------------------------------------------------------
	exclusive = Boolean(true)

	//-------------------------------------------------------
	// an archetype starts with a root node with id (=name) *archetype*
	//-------------------------------------------------------
	hasNode ArchetypeRootSpec
		isOfClass = String("archetype")
		multiplicity = String("1..1")

		//-------------------------------------------------------
		// the "archetype" node has an *exclusive* property
		// which tells if other definitions than those contained in the tree
		// are acceptable or not
		// absence of the property means non-exclusive archetype
		//-------------------------------------------------------
		hasProperty exclusivePropertySpec 
			hasName = String("exclusive")
			multiplicity = String("0..1")
			type = String("Boolean")

	//-------------------------------------------------------
	// specification for node specifications:
	// a node with any class (=label), with id *hasNode*, and child of *archetype*
	//-------------------------------------------------------
	hasNode NodeSpec
		isOfClass = String("hasNode")
		hasParent = au.edu.anu.rscs.aot.collections.tables.StringTable(([1]"archetype"))
		multiplicity = String("0..*")

		//-------------------------------------------------------
		// a node spec must specify the node id (formerly name)
		//-------------------------------------------------------
		//hasProperty NodeIdSpec
		//	hasName = String("hasId")
		//	type = String("String")
		//	multiplicity = String("1..1")

		//-------------------------------------------------------
		// a node spec may specify the node class (formerly label)
		// if not present then any label is suitable and will be
		// be lost during the tree import process
		//-------------------------------------------------------
		hasProperty NodeClassSpec
			hasName = String("isOfClass")
			type = String("String")
			multiplicity = String("1..1")

		//-------------------------------------------------------
		// a node spec must specify a list of valid parents for the node
		//-------------------------------------------------------
		hasProperty NodeParentSpec
			hasName = String("hasParent")
			type = String("StringTable")
			multiplicity = String("1..1")

		//-------------------------------------------------------
		// a node spec optionally has a *multiplicity*  property
		// defaults to 0..* if not set
		//-------------------------------------------------------
		hasProperty NodeMultiplicitySpec 
			hasName = String("multiplicity")
			type = String("IntegerRange") // caution: it's only Strings at the moment
			multiplicity = String("0..1")

	//-------------------------------------------------------
	// specification for constraint specifications
	// constraints can apply to node, edge or property specifications
	//-------------------------------------------------------
	hasNode ConstraintSpec
		isOfClass = String("mustSatisfyQuery")
		hasParent = au.edu.anu.rscs.aot.collections.tables.StringTable(([3]"hasNode","hasProperty","hasEdge"))
		multiplicity = String("0..*")

		//-------------------------------------------------------
		// a constraint spec uses a Query class descendant
		//-------------------------------------------------------
		hasProperty ConstraintClassSpec 
			hasName = String("className")
			type = String("String") 
			multiplicity = String("1..1")

	//-------------------------------------------------------
	// specification for property specifications
	// properties apply to node or edge specifications
	//-------------------------------------------------------
	hasNode PropertySpec
		isOfClass = String("hasProperty")
		hasParent = au.edu.anu.rscs.aot.collections.tables.StringTable(([2]"hasNode","hasEdge"))
		multiplicity = String("0..*")

		//-------------------------------------------------------
		// a property spec must specify a name for the property
		//-------------------------------------------------------
		hasProperty PropertyNameSpec
			hasName = String("hasName")
			type = String("String") 
			multiplicity = String("1..1")

		//-------------------------------------------------------
		// a property spec must specify a type for the property
		//-------------------------------------------------------
		hasProperty PropertyTypeSpec
			hasName = String("type")
			type = String("String") 
			multiplicity = String("1..1")

		//-------------------------------------------------------
		// a property spec must specify a multiplicity for the property
		// NB valid values are 0..1 and 1..1
		//-------------------------------------------------------
		hasProperty PropertyMultiplicitySpec
			hasName = String("multiplicity")
			type = String("String") 
			multiplicity = String("1..1")

	//-------------------------------------------------------
	// specification for edge specifications
	//-------------------------------------------------------
	hasNode EdgeSpec
		isOfClass = String("hasEdge")
		hasParent = au.edu.anu.rscs.aot.collections.tables.StringTable(([1]"hasNode"))
		multiplicity = String("0..*")

		//-------------------------------------------------------
		// an edge spec must specify the edge id (formerly name)
		//-------------------------------------------------------
		//hasProperty EdgeIdSpec
		//	hasName = String("hasId")
		//	type = String("String")
		//	multiplicity = String("1..1")

		//-------------------------------------------------------
		// an edge spec may specify the edge class (formerly label)
		// if not present then any label is suitable and will be
		// be lost during the tree import process
		//-------------------------------------------------------
		hasProperty EdgeClassSpec
			hasName = String("isOfClass")
			type = String("String")
			multiplicity = String("0..1")

		//-------------------------------------------------------
		// an edge spec must specify an end node (the start node is
		// its parent node specification)
		//-------------------------------------------------------
		hasProperty EdgeEndNodeSpec
			hasName = String("toNode")
			type = String("String")
			multiplicity = String("1..1")

		//-------------------------------------------------------
		// an edge spec optionally has a *multiplicity*  property
		// defaults to 0..* if not set
		//-------------------------------------------------------
		hasProperty EdgeMultiplicitySpec 
			hasName = String("multiplicity")
			type = String("IntegerRange") // caution: it's only Strings at the moment
			multiplicity = String("0..1")
